//===------------------------ __refstring ---------------------------------===//
//
//                     The LLVM Compiler Infrastructure
//
// This file is dual licensed under the MIT and the University of Illinois Open
// Source Licenses. See LICENSE.TXT for details.
//
//===----------------------------------------------------------------------===//

#ifndef _LIBCPP___REFSTRING
#define _LIBCPP___REFSTRING

#include <__config>
#include <memory>
#include <cstddef>
#if __APPLE__
#include <dlfcn.h>
#include <mach-o/dyld.h>
#endif

_LIBCPP_BEGIN_NAMESPACE_STD

class _LIBCPP_HIDDEN __libcpp_refstring
{
private:
    std::shared_ptr<char> str_;

public:
    explicit __libcpp_refstring(const char *msg, std::size_t msglen) :
        str_(new char[msglen + 1])
    {
        std::copy(msg, msg + msglen + 1, str_.get());
    }

    const char* c_str() const _NOEXCEPT {return str_.get();}
};

_LIBCPP_END_NAMESPACE_STD

#endif //_LIBCPP___REFSTRING
